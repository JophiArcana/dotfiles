desc: Self-sandwiching double FE
source: USAJMO 2019/2
tags: [2019-10, oly, easy, alg, FE]

---

Let $\mathbb Z$ be the set of all integers. Find all pairs of integers $(a,b)$ for which there exist functions $f:\mathbb Z\to\mathbb Z$ and $g:\mathbb Z\to\mathbb Z$ satisfying \[f(g(x))=x+a\quad\text{and}\quad g(f(x))=x+b\]

---

The answer is $|a|=|b|$. Here are possible constructions:
\begin{itemize}[itemsep=0em]
    \item For $(a,a)$, take $f(x)\equiv x+2a$, $g(x)\equiv x-a$.
    \item For $(a,-a)$, take $f(x)\equiv2a-x$, $g(x)\equiv a-x$.
\end{itemize}
Evidently $a=0\iff b=0$, so in what follows, we assume $a$, $b$ are nonzero.

Assume for contradiction $|a|\ne|b|$, and without loss of generality $|a|>|b|$. By the triple involution trick, \[f(x+b)=f(g(f(x)))=f(x)+a\]
Hence all residues of $f(x)$ modulo $|a|$ are covered by $f(0)$, $f(1)$, $\ldots$, $f(|b|-1)$; in particular, $f$ is not surjective modulo $|a|$. This is absurd, since $f(g(x))$ is clearly surjective.

