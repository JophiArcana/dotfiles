desc: f(x+1)=f(x)+1 and f(x^2)=f(x)^2
source: mini RMM 2013/2
tags: [2020-04, oly, hard, alg, fe, analysis, mini, waltz]

---

Determine all functions $f:\mathbb R\to\mathbb R$ such that \[f(x+1)=f(x)+1\quad\text{and}\quad f\left(x^2\right)=f(x)^2\]
for all real numbers $x$.

---

The only answer is $f(x)\equiv x$, which works.

It is easy to check $f(n)=n$ for all $n\in\mathbb Z$. Indeed, $f(0)=f(0)^2$ and $f(1)=f(1)^2$, but $f(1)=f(0)+1$, so $f(0)=0$ and $f(1)=1$. Then $f(n)=n$ for all $n\in\mathbb Z$ follows from $f(g(x))=g(f(x))$.
\setcounter{claim}0
\begin{claim}
    $f(x)\ge\lfloor x\rfloor$ for all $x$.
\end{claim}
\begin{proof}
    By $f(g(x))=g(f(x))$ it suffices to prove the claim for $x\in[0,1)$. Assume the contrary: then \[f\left(\sqrt x\right)^2=f(x)<0,\]
    contradiction.
\end{proof}
\begin{claim}
    $f(x)\ge x$ for all $x$.
\end{claim}
\begin{proof}
    By $f(g(x))=g(f(x))$ it suffices to prove the claim for $x\in[2012,2013)$. Let $\veps=x-f(x)>0$ by Claim 1. It is easy to check, say by induction, that \[f\left(x^{2^k}\right)=f(x)^{2^k}=(x-\veps)^{2^k}\ll x^{2^k}\]
    for sufficiently large $k$; that is, eventually \[x^{2^k}-f\left(x^{2^k}\right)>1\implies f\left(x^{2^k}\right)<x^{2^k}-1<\left\lfloor x^{2^k}\right\rfloor,\]
    which contradictions Claim 1.
\end{proof}
\begin{claim}
    $f(x)=x$ for all $x$.
\end{claim}
\begin{proof}
    By $f(g(x))=g(f(x))$ it suffices to prove the claim for $x\in[0,1)$. Assume for contradiction $f(x)>x$. Since $f(-x)^2=f(x^2)=f(x)^2$, we have $|f(-x)|=f(x)$. However if $f(x)>x$ and $f(-x)=-f(x)$, then $f(-x)<x$, contradiction by Claim 2.

    Hence we have $f(-x)=f(x)$. Then \[f(1-x)=1+f(-x)=1+f(x)=f(1+x)=2+f(x-1)=2\pm f(1-x).\]
    It follows that $f(1-x)=1$ and $f(x-1)=-1$, which contradicts Claim 2.
\end{proof}

Claim 3 is the desired conclusion, so we are done.

