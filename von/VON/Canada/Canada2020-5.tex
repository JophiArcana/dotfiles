desc: Any 9999-vertex subgraph has 9999 edges
source: Canada 2020/5
tags: [2020-03, oly, hard, combo, graph, optimization, nice]

---

Let $G$ be a graph with $19998$ vertices so that any $9999$-vertex subgraph of $G$ has at least $9999$ edges. Determine the minimum possible number of edges in $G$.

---

Let $n=3333$. The answer is $15n=49995$. We prove a more general statement: if $G$ is a graph with $an$ vertices so that any $3n$-vertex subgraph contains at least $3n$ edges, then the minimum possible number of edges in $G$ is $\tbinom a2n$. Equality is achieved by $n$ copies of $K_a$. To see that this works, suppose that in some $3n$-vertex subgraph, we select $b_i$ vertices in the $i$th copy of $K_a$. Then the number of edges of the $3n$-vertex subgraph is \[\sum_{i=1}^n\binom{b_i}2\ge n\binom32=3n\]
by Jensen's inequality.

We now prove the lower bound. Let $f(k)$ denote the minimum number of edges in a graph of $k$ vertices such that any $3n$-vertex subgraph has at least $3n$ edges.
\setcounter{claim}0
\begin{claim}
    For all $k$, \[\frac{f(k+1)}{k+1}\ge\frac{f(k)}{k-1}.\]
\end{claim}
\begin{proof}
    Consider a graph with $k+1$ vertices and as few edges as possible, so it has $f(k+1)$ edges. Each of the $k+1$ subgraphs of $k$ vertices has at least $f(k)$ edges, and each edge is a member of $k-1$ of these subgraphs, thus the claim is true by double counting.
\end{proof}

Note that for each $k$, \[f(k+1)-f(k)\ge\frac{2f(k)}{k-1}\]
by Claim 1, but also \[\frac{f(k+1)}k>\frac{f(k+1)}{k+1}\ge\frac{f(k)}{k-1},\]
so $f(k)/(k-1)$ is strictly increasing.
\begin{claim}
    $f(an)\ge\tbinom a2n$.
\end{claim}
\begin{proof}
    We induct on $a$. The base case $a=3$ is given. Assume the claim holds for $a$. Then if $M\ge an$, \[f(M+1)-f(M)\ge\frac{2f(M)}{M-1}\ge\frac{2\cdot\binom a2n}{an-1}>a-1,\]
    so $f(M+1)-f(M)\ge a$. Then \[f\big( (a+1)n\big)-f(an)\ge\sum_{i=an}^{(a+1)n-1}\big(f(i+1)-f(i)\big)\ge an,\]
    whence \[f\big( (a+1)n\big)\ge f(an)+an\ge\binom a2n+an=\binom{a+1}2n,\]
    as claimed.
\end{proof}

Thus $f(6n)\ge15n$, and we are done.
